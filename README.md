# Gurren Translation
## Prerequisites
* Install [Python 3.7](https://www.python.org/downloads/)
* Run "pip install pillow"
* Run "pip install crcmod"
* Download [ndstool.exe](https://www.darkfader.net/ds/files/ndstool.exe) and place it inside this folder
* Download [NerdFontTerminatoR.exe](https://github.com/pleonex/NerdFontTerminatoR/releases) and place it inside this folde
* Download xdelta.exe and place it inside this folder
## Extraction
* Copy the rom as "rom.nds" inside a "data" folder
* Run "extract_rom.py" to extract the ROM in the "extract" folder with ndstool, and NFP archives in the "extract_NFP" and "work_NFP" folders
* Run "extract_spc.py" to extract the SPC lines in the "spc_output.txt" file
* Run "extract_bin.py" to extract the BIN lines in the "bin_output.txt" file
* Run "extract_3dg.py" to extract the 3DG textures in the "out_3DG" folder and a "3dg_data.txt" file used by the repacker
* Run "extract_yce.py" to extract the YCE images in the "out_YCE" folder and a "yce_data.txt" file used by the repacker
* Run "extract_kpc.py" to extract the KPC images in the "out_KPC" folder
* Run "extract_vsc.py" to extract the VSC images in the "out_VSC" folder
## Font Editing
* Edit "font.png", the needed bigrams will be automatically generated by the repacker
* More symbols can be added by editing the top of the "repack_font.py" file
* Custom full-glyphs can also be added, and then used with the syntax CUS(NAME) in strings. NAME must be 4 characters long
## Text Editing
* Rename the "spc_output.txt" and "bin_output.txt" files to "spc_input.txt" and "bin_input.txt" and edit them
* Control codes are written as &lt;XX&gt; and they should be kept. &lt;0A&gt; is a line break, the other are currently unknown
* The bin_input file contains more codes in the format of UNK(XXXX), these should always be kept
* A "|" can be used to make a single-line message become a two-lines message
* A single "!" can be used to blank out a line. If just left empty, the line will be left untranslated
* If the translated line starts with "<<", the line will be padded with spaces at the beginning and end up to 20 characters, for buttons with centered kanji
* ">>" can be used to add a new dialogue box after the current line. Example: "しっかり掘れ～～！=Keep digging!>>Testing>>More than one"
* Comments can be added at the end of the lines by using #
## Image Editing
* Rename the out_ folders to work_ (out_YCE to work_YCE, etc)
* Edit the images in the "work_3DG", "work_YCE", "work_KPC" and "work_VSC" folders. The palette on the right should be followed but the repacker will try to approximate other colors to the nearest one
* If an image doesn't require repacking, it should be deleted from the work folder
## Repacking
* Run "repack.py" to generate "rom_patched.nds" and "patch.xdelta"
* If you only want to repack NFP and patch the rom, you can use "repack.py -nfp"
* You can also use the following parameters to only repack specific types: -spc, -bin, -3dg, -kpc, -yce, -vsc
* For example "repack.py -spc -bin" will only repack SPC, BIN, NFP and patch the rom
* The "-deb" parameter is also available and when used it will send the player to the Debug Map when starting a new game
